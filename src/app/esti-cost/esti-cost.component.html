<div  *ngIf="this.loading; else elseBlock" class="spinner-border text-primary" role="status">
  <span class="sr-only"></span>
</div>
<ng-template #elseBlock>
<div class="container-fluid">
  <div class="border-bottom Toolbar">
    <div class="row">
      <div class="col-xl-1"></div>
      <div class="col-xl-7 center" style="padding :15px 0 ;">
        <button mat-button>Home</button>
        <button mat-button (click)="Goanalysishome()">Analysis request form</button>
        <button mat-button>Equipment Calendar</button>
        <button mat-button>Job tracking</button>
        <button mat-button>Search previous report</button>
      </div>

        <div class="col-xl-4 center " *ngIf="isValid;else other_content">
          <div class="row">
          <div class="col-xl-8">
       {{this.nameonly}}
       ({{this.Codelocal}})
       {{this.departmentlocal}}
      </div>
      <div class="col-xl-4">
       <button mat-raised-button color="primary" (click)="Logout()">Log out</button>
        </div>
      </div>
    </div>

    <ng-template #other_content>
    <div class="col-xl-4 center ">
      <button mat-raised-button color="primary" (click)="Gologin()">Login</button>
      <button mat-raised-button color="primary" style="margin-left:10px;" (click)="GoSignup()">Sign up</button>
    </div>
  </ng-template>


    </div>
  </div>
  
    <div class="row">
      <div class="col-sm-1">
  
      </div>
  
      <div class="col-sm-10">
        <div class="row">
          <div class="col-sm-9">
            <h1 style="padding:40px 0px; padding-left:150px;">Request no.{{this.DataRes[0].REQ_NUM}}</h1>
          </div>
          <div class="col-sm-3" style="padding:40px 0px; padding-left: 90px;">
            <div class="row ">
              <button mat-mini-fab matTooltip="Edit" class="button3" matTooltipPosition="above">
                <mat-icon>create</mat-icon>
              </button>
              <button mat-mini-fab matTooltip="Save" matTooltipClass="example-tooltip-red"
                aria-label="Button that shows a red tooltip" matTooltipPosition="above" style="margin-left:20px;">
                <mat-icon>save</mat-icon>
              </button>
            </div>
          </div>
        </div>
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Analysis request form</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <div class="row">
              <div class="col-sm-8">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-1"><b>Title:</b></div>
                    <div class="col-sm-11">{{this.DataRes[0].TITLE}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Background:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].BACKGRUD}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Purpose:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].PURPOSE}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Hypothesis:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].HYPO}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Analysis type:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].ANA_TYPE}},{{this.DataRes[0].ANA_TYPE2}}</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
               
                  <div class="row" style=" padding-top : 30px;">
                    <div class="col-sm-4"><b>Issue Date:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].ISSUE_DATE}}</div>
                  </div>
                
                
                  <div class="row" style=" padding-top : 10px;">
                    <div class="col-sm-4"><b>Requester:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].REQ_TER}}</div>
                  </div>
               
               
                  <div class="row" style=" padding-top : 10px;">
                    <div class="col-sm-4"><b>Phone:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].PHONE}}</div>
                  </div>
                
                
                  <div class="row" style=" padding-top : 10px;">
                    <div class="col-sm-4"><b>Department:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].DEP_MENT}} </div>
                  </div>
                
              
                  <div class="row" style=" padding-top : 10px;">
                    <div class="col-sm-4"><b>Product:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].PRODUCT}}</div>
                  </div>
               
  
                <mat-card class="cardAT">
  
                </mat-card>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Request Analysis Techniques</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <h4> <b>{{this.DataRes[0].REQ_ANA_TECHNI}}{{this.DataRes[0].REQ_ANA_TECHNI2}} </b> </h4>
          </mat-card-content>
        </mat-card>
  
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Sample Information</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <div class="row">
              <div class="col-sm-3">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-7"><b>Number of sample:</b></div>
                    <div class="col-sm-5">{{this.DataRes[0].NUM_SAMPLE}} </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-5"><b>Send sample date:</b></div>
                    <div class="col-sm-7">{{this.DataRes[0].SEND_SAM_DATE}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Piority:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].PIORITY}}</div>
                  </div>
                </div>
  
              </div>
              <div class="col-sm-5">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-5"><b>Expected finish date:</b></div>
                    <div class="col-sm-7">{{this.DataRes[0].FINISH_DATE}}</div>
                  </div>
                </div>
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>Reason:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].REASON}}</div>
                  </div>
                </div>
                
              </div>
            </div>
  
            <div class="container">
              <form>
                <table>
                  <tr *ngFor="let item of sample2 let i = index">
                    <td width="300px">
                      <div class="input1" style="padding: 0 10px ;">
                        <div class="row">
                          <div class="col-sm-3"><b>Lot no:</b></div>
                          <div class="col-sm-9"> {{ item.Lot_no }}</div>
                        </div>
                      </div>
                      
                    </td>
                    <td width="400px">
                      <div class="input1" style="padding: 0 10px ;">
                        <div class="row">
                          <div class="col-sm-4"><b>Sample name:</b></div>
                          <div class="col-sm-8">{{ item.Sample_name }}</div>
                        </div>
                      </div>
  
                    </td>
                    <td width="200px">
                      <div class="input1" style="padding: 0 10px ;">
                        <div class="row">
                          <div class="col-sm-4"><b>Remarks:</b></div>
                          <div class="col-sm-8">{{ item.Remarks }}</div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </table>
              </form>
            </div>
          </mat-card-content>
        </mat-card>
  
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Comment & Description (elements, structure, size, condition, etc.)</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            {{this.DataRes[0].COMM_SAM_INFOR}}
          </mat-card-content>
        </mat-card>
  
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Attention: Are dangerous or ESD substance included?</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <!-- Dangerous -->
            <div class=" col-sm-12 ">
              {{this.DataRes[0].DANGER}}
            </div>
            <!-- Sample after tested -->
            
              <div class="row">
                <div class="col-sm-2"><b>Sample after tested:</b></div>
                <div class="col-sm-10">{{this.DataRes[0].SAM_AF_TEST}}</div>
              </div>
  
          </mat-card-content>
        </mat-card>
  
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Keywords for searching</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <div class="row">
              <div class="col-sm-4">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-4"><b>Characteristic:</b></div>
                    <div class="col-sm-8">{{this.DataRes[0].KEY_CHARA}}</div>
                  </div>
                </div>
  
              </div>
              <div class="col-sm-4">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-2"><b>State:</b></div>
                    <div class="col-sm-10">{{this.DataRes[0].KEY_STATE}}</div>
                  </div>
                </div>
  
              </div>
              <div class="col-sm-4">
                <div class="input1">
                  <div class="row">
                    <div class="col-sm-3"><b>Phenomena:</b></div>
                    <div class="col-sm-9">{{this.DataRes[0].KEY_PHENO}}</div>
                  </div>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
  
        <mat-card class="card1">
          <mat-card-title-group>
            <mat-card-title>Question and Answer form</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
            <div>
              <table class="table ">
                <thead>
                  <tr>
                    <th width="100px" class=" Titlereview">No.</th>
                    <th width="300px">Title</th>
                    <th width="50px" class=" Titlereview">Read</th>
                    <th width="50px" class=" Titlereview">Answer&Edit</th>
                    <th width="100px" class=" Titlereview">Status</th>
                  </tr>
                </thead>
                <tbody>
                  <tr  *ngFor="let item of DataResQUESTION let i = index" >
                    <th class=" Titlereview">Question no.{{i+1}}:</th>
                    <td>{{item.QUESTION_DETAIL}} </td>
                    <td class=" Titlereview">
                      <button mat-mini-fab color="primary" class="button4" (click)="GoAswer(item.ID)" >
                        <mat-icon>import_contacts</mat-icon>
                      </button>
                     </td>
                    <td class=" Titlereview">
                      <button mat-mini-fab color="primary" class="button3" (click)="GoAsweredit(item.ID)" >
                        <mat-icon>edit</mat-icon>
                      </button>
                    </td>
                    <td class=" Titlereview">{{item.STATUS_QUESTION}}</td>
                  </tr>
                </tbody>
              </table>
              <div class=" container-fluid center">
              
                <button mat-flat-button class="Buttonaddquetion" (click)="onOpenDialogClick()"> + Add question </button>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="card1" style="margin-top: 10px;">
          <mat-card-title-group>
              <mat-card-title>Estimate cost</mat-card-title>
          </mat-card-title-group>
          <mat-card-content>
              <table class="table table-bordered Titlereview ">
                  <thead >
                    <tr>
                      <th >Step</th>
                      <th >Technique</th>
                      <th >Quantity</th>
                      <th >Technique cost/1pc.</th>
                      <th >Estimate cost</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th>Step 1</th>
                      <td>VHX</td>
                      <td>5 pcs</td>
                      <td>200 Baht/pc</td>
                      <td>1000 Baht</td>
                    </tr>
                    <tr>
                      <th>Step2</th>
                      <td>X-ray3D</td>
                      <td>5 pcs</td>
                      <td>500 Baht/pc</td>
                      <td>2500 Bath</td>
                    </tr>
                    <tr>
                      <th>Step3</th>
                      <td>SEM</td>
                      <td>5 pcs</td>
                      <td>600 Baht/pc</td>
                      <td>3000 Bat</td>
                    </tr>
                    <tr>
                      <th>Total</th>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td>65XX Bath</td>
                    </tr> 
                  </tbody>
                </table>
                <div class="row center"  >
                  <div class="col-sm-3"></div>
                  <div class="col-sm-3 center"><button mat-raised-button color="primary" class="button2" (click)="GoRequeinfo()">Accept</button></div>
                  <div class="col-sm-3 center"><button mat-raised-button color="primary" class="button2" >Decline</button></div>
                  <div class="col-sm-3"></div>
                </div>
          </mat-card-content>
      </mat-card>
    
      <mat-card class="card1">
        <mat-card-title-group>
          <mat-card-title>Review Information</mat-card-title>
        </mat-card-title-group>
        <mat-card-content>
          <div class="tablestyle">
          <table class="table  border-dark">
            <thead>
              <tr>
                <th class="Titlereview" width="150px">Task</th>
                <th class="Titlereview" width="100px">Process</th>
                <th class="Titlereview" width="200px">Name</th>
                <th class="Titlereview" width="300px">Processing date&time</th>
                <th class="Titlereview" width="200px">Comment</th>
                <th class="Titlereview" width="200px">cc</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td> Pending request</td>
                <td>Issuer</td>
                <td>{{this.DataRes[0].REVI_PAND_ISSUER}} </td>
                <td></td>
                <td>{{this.DataRes[0].REVI_PAND_ISSUE_COM}} </td>
                <td>{{this.DataRes[0].REVI_PAND_ISSUE_CC}} </td>
              </tr>
              <tr>
                <td></td>
                <td>Confirm</td>
                <td>{{this.DataRes[0].REVI_PAND_CONFIRM}} </td>
                <td></td>
                <td>{{this.DataRes[0].REVI_PAND_CONFIRM_COM}}</td>
                <td>
                <p *ngFor="let item of this.confirmcc let i = index" >
                  {{item}}
                  
                </p></td>
              </tr>
              <tr>
                <th>Analysis section</th>
                <td>Controller</td>
                <td>{{this.DataRes[0].REVI_ANASEC_CONTROL}}</td>
                <td> </td>
                <td>
                  {{this.DataRes[0].REVI_ANASEC_CONTROL_COM}}
              </td>
                <td>
                  {{this.DataRes[0].REVI_ANASEC_CONTROL_CC1}}
              </td>
              </tr>
              <tr>
                <td></td>
                <td>Analyst</td>
                <td>{{this.DataRes[0].REVI_ANASEC_ANAL}}</td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <th>Report approval</th>
                <td>Check</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>Confirm</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>Report approval</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <th>CS Evaluation</th>
                <td>Issuer</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <th>Completed</th>
                <td>Close</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        </mat-card-content>
      </mat-card>
  
      </div>
      <div class="col-sm-1">
      </div>
    </div>
  </div>
</ng-template>